# åŒå‡çº¿ç­–ç•¥ä¿¡å·è´¨é‡ä¼˜åŒ–éœ€æ±‚

**æ—¥æœŸ**: 2025-11-09
**æ›´æ–°**: 2025-11-09
**çŠ¶æ€**: ç¬¬ä¸€æ‰¹å·²å®Œæˆ âœ…
**ç›®æ ‡**: æå‡åŒå‡çº¿äº¤å‰ç­–ç•¥çš„ä¿¡å·è´¨é‡ï¼Œé™ä½å‡ä¿¡å·ï¼Œæé«˜èƒœç‡å’Œæ”¶ç›Šç‡
**åŸåˆ™**: æ‰€æœ‰ä¼˜åŒ–é€»è¾‘å¿…é¡»å¯å¼€å…³ï¼Œæ”¯æŒA/Bå¯¹æ¯”éªŒè¯

---

## ä¸€ã€é¡¹ç›®çŠ¶æ€

### âœ… å·²å®Œæˆï¼ˆç¬¬ä¸€æ‰¹ï¼‰

**åŸºç¡€æ¶æ„**
- âœ… è¿‡æ»¤å™¨åŸºç±»å’Œæ¨¡å—ç»“æ„ (`strategies/filters/`)
- âœ… å¢å¼ºç‰ˆç­–ç•¥æ¡†æ¶ (`sma_cross_enhanced.py`)
- âœ… å‚æ•°ä¼˜åŒ–æ”¯æŒ
- âœ… åŸºçº¿æµ‹è¯•éªŒè¯é€šè¿‡

**å·²å®ç°è¿‡æ»¤å™¨ï¼ˆ5ä¸ªï¼‰**
- âœ… A. å‡çº¿æ–œç‡è¿‡æ»¤å™¨ - `SlopeFilter`
- âœ… B. ADXè¶‹åŠ¿å¼ºåº¦è¿‡æ»¤å™¨ - `ADXFilter`
- âœ… D. æˆäº¤é‡ç¡®è®¤è¿‡æ»¤å™¨ - `VolumeFilter`
- âœ… H. æŒç»­ç¡®è®¤è¿‡æ»¤å™¨ - `ConfirmationFilter`
- âœ… L. è¿ç»­æ­¢æŸä¿æŠ¤ - `LossProtectionFilter`

**éªŒæ”¶æµ‹è¯•ç»“æœï¼ˆ3ä¸ªAè‚¡ETFï¼‰**
| ç­–ç•¥ | é”‚ç”µæ± ETF | æ–°èƒ½æºETF | å‚¨èƒ½ç”µæ± ETF |
|------|-----------|-----------|-------------|
| åŸç‰ˆsma_cross | æ”¶ç›Š557%, å¤æ™®0.96 | æ”¶ç›Š294%, å¤æ™®1.05 | æ”¶ç›Š112%, å¤æ™®1.05 |
| sma_cross_enhanced(æ— è¿‡æ»¤) | æ”¶ç›Š557%, å¤æ™®0.96 | æ”¶ç›Š294%, å¤æ™®1.05 | æ”¶ç›Š112%, å¤æ™®1.05 |

> å¢å¼ºç‰ˆåœ¨æœªå¯ç”¨è¿‡æ»¤å™¨æ—¶ä¸åŸºçº¿å®Œå…¨ä¸€è‡´ï¼ŒéªŒè¯æ¡†æ¶æ­£ç¡®æ€§ âœ…

**è¿‡æ»¤å™¨æ•ˆæœæµ‹è¯•ç»“æœï¼ˆ2025-11-09ï¼Œä¼˜åŒ–åå‚æ•°ï¼‰**

| é…ç½® | é”‚ç”µæ± ETF | æ–°èƒ½æºETF | å‚¨èƒ½ç”µæ± ETF | å¹³å‡å¤æ™® | æ¨èåº¦ |
|------|-----------|-----------|-------------|----------|--------|
| **ADX+æˆäº¤é‡** â­ | æ”¶ç›Š128%, å¤æ™®1.37, èƒœç‡100% | æ”¶ç›Š65%, å¤æ™®1.40, èƒœç‡100% | æ”¶ç›Š11%, å¤æ™®0.41 | **1.03** | âœ…âœ…âœ… |
| ADXè¿‡æ»¤ | æ”¶ç›Š155%, å¤æ™®1.34, èƒœç‡67% | æ”¶ç›Š55%, å¤æ™®1.29 | æ”¶ç›Š11%, å¤æ™®0.41 | 0.68 | âœ…âœ… |
| æˆäº¤é‡è¿‡æ»¤ | æ”¶ç›Š147%, å¤æ™®1.35, èƒœç‡45% | æ”¶ç›Š46%, å¤æ™®1.12 | æ”¶ç›Š11%, å¤æ™®0.41 | 0.63 | âœ…âœ… |
| åŸºçº¿ | æ”¶ç›Š162%, å¤æ™®1.27 | æ”¶ç›Š78%, å¤æ™®0.97 | æ”¶ç›Š16%, å¤æ™®0.50 | 0.58 | âœ… |

**æ ¸å¿ƒç»“è®º**ï¼š
- âœ… **ADX+æˆäº¤é‡ç»„åˆ**è¡¨ç°æœ€ä¼˜ï¼Œå¹³å‡å¤æ™®ä»0.58â†’1.03ï¼ˆ+77%ï¼‰ï¼Œå¼ºçƒˆæ¨è
- âœ… **ADXè¿‡æ»¤**å•ç‹¬ä½¿ç”¨ä¹Ÿæœ‰æ•ˆï¼Œå¤æ™®æå‡17%
- âŒ **æŒç»­ç¡®è®¤è¿‡æ»¤**å’Œ**æ–œç‡è¿‡æ»¤**åœ¨å½“å‰å‚æ•°ä¸‹æ•ˆæœä¸ä½³ï¼Œéœ€è¦è°ƒä¼˜
- âŒ **æ­¢æŸä¿æŠ¤**å½“å‰æ— æ˜æ˜¾ä½œç”¨

**æ¨èé…ç½®**ï¼š
```python
# ä¿å®ˆå‹ï¼ˆæ¨èï¼‰
bt.run(enable_adx_filter=True, enable_volume_filter=True)
```

---

## äºŒã€å½“å‰é—®é¢˜

ç°æœ‰åŒå‡çº¿ç­–ç•¥ï¼ˆsma_crossï¼‰ä¿¡å·è¿‡äºç²—ç³™ï¼š
- æ‰€æœ‰é‡‘å‰=ä¹°å…¥ï¼Œæ­»å‰=å–å‡º
- æ— ä¿¡å·è´¨é‡è¿‡æ»¤ï¼Œå‡çªç ´é¢‘ç¹
- éœ‡è¡å¸‚è¡¨ç°å·®ï¼Œé¢‘ç¹å¼€å¹³ä»“

---

## ä¸‰ã€è¿‡æ»¤å™¨è®¾è®¡æ–¹æ¡ˆ

### 3.1 è¶‹åŠ¿ç¡®è®¤ç±»è¿‡æ»¤å™¨

#### A. å‡çº¿æ–œç‡è¿‡æ»¤ â­â­â­ âœ… å·²å®ç°
**çŠ¶æ€**: å·²å®Œæˆ
**å®ç°**: `strategies/filters/trend_filters.py: SlopeFilter`
**é€»è¾‘**: é‡‘å‰æ—¶çŸ­å‡çº¿å’Œé•¿å‡çº¿å¿…é¡»åŒæ—¶å‘ä¸Š
```python
short_slope = (sma_short[-1] - sma_short[-5]) / 5 > 0
long_slope = (sma_long[-1] - sma_long[-5]) / 5 > 0
```
**å‚æ•°**:
- `lookback=5`: æ–œç‡è®¡ç®—å›æº¯æœŸ
- `require_both=True`: æ˜¯å¦è¦æ±‚åŒå‡çº¿éƒ½å‘ä¸Š

**ä½¿ç”¨æ–¹å¼**:
```python
bt.run(enable_slope_filter=True, slope_lookback=5)
```

#### B. ADXè¶‹åŠ¿å¼ºåº¦è¿‡æ»¤ â­â­â­ âœ… å·²å®ç°
**çŠ¶æ€**: å·²å®Œæˆ
**å®ç°**: `strategies/filters/trend_filters.py: ADXFilter`
**é€»è¾‘**: ADX > é˜ˆå€¼æ‰äº¤æ˜“ï¼Œç¡®ä¿è¶‹åŠ¿è¶³å¤Ÿå¼º
```python
adx = calculate_adx(high, low, close, period=14)
signal_valid = adx > 25
```
**å‚æ•°**:
- `period=14`: ADXè®¡ç®—å‘¨æœŸ
- `threshold=25`: ADXé˜ˆå€¼

**ä½¿ç”¨æ–¹å¼**:
```python
bt.run(enable_adx_filter=True, adx_period=14, adx_threshold=25)
```

#### C. ä¹–ç¦»ç‡è¿‡æ»¤ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: ä»·æ ¼ä¸å‡çº¿åç¦»è¿‡å¤§æ—¶ä¸è¿½æ¶¨
```python
bias = (close - sma_short) / sma_short * 100
signal_valid = abs(bias) < 5%  # åç¦»ä¸è¶…è¿‡5%
```
**é¢„æœŸ**: é¿å…è¿½é«˜ï¼Œç­‰å¾…å›è°ƒå…¥åœº

---

### 3.2 æˆäº¤é‡ç¡®è®¤ç±»è¿‡æ»¤å™¨

#### D. æˆäº¤é‡æ”¾å¤§ç¡®è®¤ â­â­â­ âœ… å·²å®ç°
**çŠ¶æ€**: å·²å®Œæˆ
**å®ç°**: `strategies/filters/volume_filters.py: VolumeFilter`
**é€»è¾‘**: é‡‘å‰æ—¶æˆäº¤é‡éœ€é«˜äºå‡å€¼
```python
volume_ma = sma(volume, 20)
volume_confirm = volume > volume_ma * 1.2  # æ”¾å¤§20%
```
**å‚æ•°**:
- `period=20`: æˆäº¤é‡å‡å€¼å‘¨æœŸ
- `ratio=1.2`: æˆäº¤é‡æ”¾å¤§å€æ•°

**ä½¿ç”¨æ–¹å¼**:
```python
bt.run(enable_volume_filter=True, volume_period=20, volume_ratio=1.2)
```

#### E. æ”¾é‡è¶‹åŠ¿ â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: è¿‘æœŸæˆäº¤é‡å‘ˆä¸Šå‡è¶‹åŠ¿
```python
volume_trend = (volume_ma5 > volume_ma20)
```
**é¢„æœŸ**: è¿½éšèµ„é‡‘æµå‘

---

### 3.3 æ³¢åŠ¨ç‡ä¸é£é™©æ§åˆ¶

#### F. ATRæ³¢åŠ¨ç‡è¿‡æ»¤ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: æ³¢åŠ¨ç‡è¿‡é«˜æ—¶ä¸å¼€ä»“ï¼Œæ§åˆ¶é£é™©
```python
atr = calculate_atr(high, low, close, period=14)
atr_ratio = atr / close < 0.05  # æ³¢åŠ¨ç‡<5%
```
**é¢„æœŸ**: é¿å…å‰§çƒˆæ³¢åŠ¨æœŸ

#### G. ä»·æ ¼ä½ç½®è¿‡æ»¤ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: ä¸åœ¨è¿‘æœŸé«˜ä½ä¹°å…¥
```python
high_60d = max(high[-60:])
price_position = (close - low_60d) / (high_60d - low_60d)
signal_valid = price_position < 0.8  # ä¸åœ¨80%ä»¥ä¸Šé«˜ä½
```
**é¢„æœŸ**: é¿å…è¿½é«˜å¥—ç‰¢

---

### 3.4 ä¿¡å·ç¡®è®¤ä¸è¿‡æ»¤

#### H. æŒç»­ç¡®è®¤ï¼ˆåå‡çªç ´ï¼‰â­â­â­ âœ… å·²å®ç°
**çŠ¶æ€**: å·²å®Œæˆ
**å®ç°**: `strategies/filters/confirmation_filters.py: ConfirmationFilter`
**é€»è¾‘**: é‡‘å‰åéœ€æŒç»­Næ ¹Kçº¿æ‰ç¡®è®¤
```python
cross_bars = 0
for i in range(1, confirm_period+1):
    if sma_short[-i] > sma_long[-i]:
        cross_bars += 1
signal_valid = (cross_bars >= confirm_period)  # å¦‚3æ ¹Kçº¿
```
**å‚æ•°**:
- `confirm_bars=3`: ç¡®è®¤æ‰€éœ€Kçº¿æ•°

**ä½¿ç”¨æ–¹å¼**:
```python
bt.run(enable_confirm_filter=True, confirm_bars=3)
```

#### I. å¤šå‘¨æœŸå…±æŒ¯ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: æ—¥çº¿é‡‘å‰ + å‘¨çº¿ä¹Ÿå¤šå¤´æ’åˆ—
```python
weekly_trend = weekly_sma_short > weekly_sma_long
signal_valid = daily_golden_cross and weekly_trend
```
**é¢„æœŸ**: æé«˜è¶‹åŠ¿ä¸€è‡´æ€§

---

### 3.5 åŠ¨é‡æŒ‡æ ‡è¾…åŠ©

#### J. RSIè¶…ä¹°è¶…å–è¿‡æ»¤ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: RSIä¸åœ¨æç«¯åŒºåŸŸ
```python
rsi = calculate_rsi(close, period=14)
signal_valid = 30 < rsi < 70
```
**é¢„æœŸ**: é¿å…è¶…ä¹°åŒºä¹°å…¥

#### K. MACDæŸ±çŠ¶å›¾ç¡®è®¤ â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: MACDæŸ±ä»è´Ÿè½¬æ­£ä¸”æ‰©å¤§
```python
macd_hist_growing = (macd_hist[-1] > macd_hist[-2] > 0)
```
**é¢„æœŸ**: åŠ¨é‡ç¡®è®¤

---

### 3.6 é˜²å¾¡æ€§è¿‡æ»¤å™¨

#### L. è¿ç»­æ­¢æŸä¿æŠ¤ â­â­â­ âœ… å·²å®ç°
**çŠ¶æ€**: å·²å®Œæˆ
**å®ç°**: `strategies/filters/defensive_filters.py: LossProtectionFilter`
**é€»è¾‘**: è¿ç»­äºæŸNæ¬¡åæš‚åœMä¸ªå‘¨æœŸ
```python
if consecutive_losses >= 3:
    pause_trading_for(10)  # æš‚åœ10ä¸ªå‘¨æœŸ
```
**å‚æ•°**:
- `max_losses=3`: æœ€å¤§è¿ç»­äºæŸæ¬¡æ•°
- `pause_bars=10`: æš‚åœKçº¿æ•°

**ä½¿ç”¨æ–¹å¼**:
```python
bt.run(enable_loss_protection=True, max_losses=3, pause_bars=10)
```

#### M. å›æ’¤æ—¶ä¹°å…¥ â­â­ ğŸ“ å¾…å®ç°
**é€»è¾‘**: é‡‘å‰åç­‰ä»·æ ¼å›è°ƒåˆ°çŸ­å‡çº¿é™„è¿‘å†ä¹°
```python
pullback_valid = (close <= sma_short * 1.01)  # åœ¨å‡çº¿1%å†…
```
**é¢„æœŸ**: æ›´å¥½çš„å…¥åœºä½ç½®

---

## å››ã€å®ç°æ–¹æ¡ˆ

### 4.1 ä»£ç ç»“æ„ï¼ˆå·²å®Œæˆ âœ…ï¼‰
```
strategies/
â”œâ”€â”€ sma_cross.py                    # åŸç­–ç•¥
â”œâ”€â”€ sma_cross_enhanced.py          # å¢å¼ºç‰ˆç­–ç•¥ âœ…
â”œâ”€â”€ __init__.py                     # æ¨¡å—å¯¼å‡º âœ…
â””â”€â”€ filters/
    â”œâ”€â”€ __init__.py                 # è¿‡æ»¤å™¨æ¨¡å—å¯¼å‡º âœ…
    â”œâ”€â”€ base.py                     # è¿‡æ»¤å™¨åŸºç±» âœ…
    â”œâ”€â”€ trend_filters.py            # è¶‹åŠ¿ç±»è¿‡æ»¤å™¨ âœ…
    â”œâ”€â”€ volume_filters.py           # æˆäº¤é‡ç±»è¿‡æ»¤å™¨ âœ…
    â”œâ”€â”€ confirmation_filters.py     # ç¡®è®¤ç±»è¿‡æ»¤å™¨ âœ…
    â”œâ”€â”€ defensive_filters.py        # é˜²å¾¡ç±»è¿‡æ»¤å™¨ âœ…
    â”œâ”€â”€ volatility_filters.py       # æ³¢åŠ¨ç‡ç±»è¿‡æ»¤å™¨ ğŸ“
    â””â”€â”€ momentum_filters.py         # åŠ¨é‡ç±»è¿‡æ»¤å™¨ ğŸ“

å·¥å…·è„šæœ¬/
â”œâ”€â”€ test_filters.sh                 # æ‰¹é‡å¯¹æ¯”æµ‹è¯•è„šæœ¬ âœ…
â””â”€â”€ quick_test_filters.py           # å¿«é€ŸéªŒè¯å·¥å…· âœ…
```

### 4.2 ä½¿ç”¨æ–¹å¼

**æ–¹å¼1ï¼šPythonä»£ç ç›´æ¥è°ƒç”¨**
```python
from backtesting import Backtest
from strategies.sma_cross_enhanced import SmaCrossEnhanced

# ä¸å¯ç”¨ä»»ä½•è¿‡æ»¤å™¨ï¼ˆç­‰åŒåŸºçº¿ï¼‰
stats = bt.run()

# å¯ç”¨å•ä¸ªè¿‡æ»¤å™¨
stats = bt.run(enable_slope_filter=True)

# å¯ç”¨å¤šä¸ªè¿‡æ»¤å™¨
stats = bt.run(
    enable_slope_filter=True,
    enable_adx_filter=True,
    enable_volume_filter=True,
    adx_threshold=30  # è‡ªå®šä¹‰å‚æ•°
)
```

**æ–¹å¼2ï¼šå‘½ä»¤è¡Œä½¿ç”¨ï¼ˆé€šè¿‡run_backtest.shï¼‰**
```bash
# åŸºçº¿æµ‹è¯•
./run_backtest.sh \
  --stock-list results/trend_etf_pool.csv \
  --strategy sma_cross \
  --optimize \
  --data-dir data/chinese_etf/daily

# å¢å¼ºç‰ˆï¼ˆæ— è¿‡æ»¤å™¨ï¼‰
./run_backtest.sh \
  --stock-list results/trend_etf_pool.csv \
  --strategy sma_cross_enhanced \
  --optimize \
  --data-dir data/chinese_etf/daily
```

> **æ³¨æ„**: å½“å‰å‘½ä»¤è¡Œæš‚ä¸æ”¯æŒè¿‡æ»¤å™¨å‚æ•°ä¼ é€’ï¼Œéœ€åœ¨Pythonå±‚é¢å¯ç”¨

---

## äº”ã€éªŒè¯æŒ‡æ ‡

æ¯ä¸ªè¿‡æ»¤å™¨éœ€éªŒè¯ä»¥ä¸‹æŒ‡æ ‡æ”¹å–„æƒ…å†µï¼š
1. **èƒœç‡**: Win Rate
2. **ç›ˆäºæ¯”**: Avg Win / Avg Loss
3. **å¤æ™®æ¯”ç‡**: Sharpe Ratio
4. **æœ€å¤§å›æ’¤**: Max Drawdown
5. **äº¤æ˜“æ¬¡æ•°**: è¿‡æ»¤åçš„äº¤æ˜“é¢‘ç‡
6. **æ”¶ç›Šç‡**: Total Return

**é€šè¿‡æ ‡å‡†**: è‡³å°‘2é¡¹æ ¸å¿ƒæŒ‡æ ‡æå‡ + æ— å…³é”®æŒ‡æ ‡ä¸¥é‡æ¶åŒ–

---

## å…­ã€å¼€å‘è¿›åº¦

### âœ… ç¬¬ä¸€æ‰¹ï¼ˆå·²å®Œæˆï¼‰- ç”¨æ—¶1å¤©
- âœ… A. å‡çº¿æ–œç‡è¿‡æ»¤å™¨
- âœ… B. ADXè¶‹åŠ¿å¼ºåº¦è¿‡æ»¤å™¨
- âœ… D. æˆäº¤é‡ç¡®è®¤è¿‡æ»¤å™¨
- âœ… H. æŒç»­ç¡®è®¤è¿‡æ»¤å™¨
- âœ… L. è¿ç»­æ­¢æŸä¿æŠ¤
- âœ… åŸºç¡€æ¶æ„å’Œæµ‹è¯•æ¡†æ¶

### âœ… ç¬¬äºŒæ‰¹ï¼ˆå·²å®Œæˆï¼‰
1. **è¿‡æ»¤å™¨æ•ˆæœéªŒè¯** âœ… å·²å®Œæˆ
   - âœ… åˆ›å»ºå¯¹æ¯”æµ‹è¯•å·¥å…· (`test_filter_comprehensive.py`)
   - âœ… æµ‹è¯•9ç§é…ç½®åœ¨3ä¸ªETFä¸Šçš„æ•ˆæœ
   - âœ… ç”Ÿæˆå¯¹æ¯”æ•°æ® (`results/filter_test_*.csv`)
   - âœ… æ›´æ–°éœ€æ±‚æ–‡æ¡£æµ‹è¯•ç»“è®º

2. **å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ** âœ… å·²å®Œæˆ
   - âœ… æ‰©å±•backtest_runner.pyæ·»åŠ è¿‡æ»¤å™¨å‚æ•°è§£æ
   - âœ… æ”¯æŒ`--enable-adx-filter`ç­‰å¼€å…³å‚æ•°
   - âœ… æ”¯æŒè¿‡æ»¤å™¨å‚æ•°é…ç½®ï¼ˆå¦‚`--adx-threshold=30`ï¼‰
   - âœ… æ›´æ–°run_backtest.shå¸®åŠ©æ–‡æ¡£
   - âœ… éªŒè¯å‘½ä»¤è¡Œå‚æ•°ç”Ÿæ•ˆ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# æ¨èé…ç½®ï¼šADX+æˆäº¤é‡è¿‡æ»¤
./run_backtest.sh -s 561160.SH -t sma_cross_enhanced -o \
  --enable-adx-filter --enable-volume-filter \
  --data-dir data/chinese_etf/daily
```

### ğŸ“ ç¬¬ä¸‰æ‰¹ï¼ˆå¾…å¼€å‘ï¼‰- é¢„è®¡2å¤©
3. **ä¸­ä¼˜å…ˆçº§è¿‡æ»¤å™¨å®ç°**
   - C. ä¹–ç¦»ç‡è¿‡æ»¤
   - F. ATRæ³¢åŠ¨ç‡è¿‡æ»¤
   - G. ä»·æ ¼ä½ç½®è¿‡æ»¤
   - J. RSIè¿‡æ»¤
   - M. å›æ’¤ä¹°å…¥

### ğŸ“ ç¬¬ä¸‰æ‰¹ï¼ˆå¾…è§„åˆ’ï¼‰- é¢„è®¡2å¤©
- I. å¤šå‘¨æœŸå…±æŒ¯
- E. æ”¾é‡è¶‹åŠ¿
- K. MACDç¡®è®¤
- å…¨é‡éªŒè¯ä¸è°ƒä¼˜

---

## ä¸ƒã€åç»­TODO

### ğŸ”¥ è¿‘æœŸä»»åŠ¡ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

1. **è¿‡æ»¤å™¨æ•ˆæœéªŒè¯** âš¡ æœ€é‡è¦
   - [ ] ä¿®å¤quick_test_filters.pyçš„TradingCostConfigé—®é¢˜
   - [ ] å¯¹é”‚ç”µæ± ETFæµ‹è¯•5ä¸ªè¿‡æ»¤å™¨çš„å•ç‹¬æ•ˆæœ
   - [ ] å¯¹æ–°èƒ½æºETFã€å‚¨èƒ½ç”µæ± ETFéªŒè¯
   - [ ] æµ‹è¯•è¿‡æ»¤å™¨ç»„åˆï¼ˆ2-3ä¸ªç»„åˆï¼‰
   - [ ] ç”Ÿæˆæ•ˆæœå¯¹æ¯”æŠ¥å‘Š

2. **å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ**
   - [ ] åœ¨backtest_runner.pyæ·»åŠ è¿‡æ»¤å™¨å‚æ•°è§£æ
   - [ ] æ”¯æŒ`--enable-slope-filter`ç­‰å¼€å…³
   - [ ] æ”¯æŒè¿‡æ»¤å™¨å‚æ•°é…ç½®ï¼ˆå¦‚`--adx-threshold=30`ï¼‰
   - [ ] æ›´æ–°run_backtest.shå¸®åŠ©æ–‡æ¡£

3. **æ‰©å±•ETFæ± æµ‹è¯•**
   - [ ] åœ¨å®Œæ•´20ä¸ªETFä¸Šæµ‹è¯•åŸºçº¿
   - [ ] åœ¨å®Œæ•´20ä¸ªETFä¸Šæµ‹è¯•å„è¿‡æ»¤å™¨
   - [ ] ç»Ÿè®¡è¿‡æ»¤å™¨çš„å¹³å‡æå‡æ•ˆæœ

### ğŸ“‹ ä¸­æœŸä»»åŠ¡

4. **å®ç°ç¬¬äºŒæ‰¹è¿‡æ»¤å™¨**
   - [ ] C. ä¹–ç¦»ç‡è¿‡æ»¤å™¨ï¼ˆvolatility_filters.pyï¼‰
   - [ ] F. ATRæ³¢åŠ¨ç‡è¿‡æ»¤å™¨ï¼ˆvolatility_filters.pyï¼‰
   - [ ] G. ä»·æ ¼ä½ç½®è¿‡æ»¤å™¨ï¼ˆvolatility_filters.pyï¼‰
   - [ ] J. RSIè¿‡æ»¤å™¨ï¼ˆmomentum_filters.pyï¼‰
   - [ ] M. å›æ’¤ä¹°å…¥è¿‡æ»¤å™¨ï¼ˆdefensive_filters.pyï¼‰

5. **æ–‡æ¡£å’Œç¤ºä¾‹**
   - [ ] ç¼–å†™è¿‡æ»¤å™¨ä½¿ç”¨æ•™ç¨‹
   - [ ] æ·»åŠ Jupyter Notebookç¤ºä¾‹
   - [ ] æ›´æ–°README

### ğŸš€ é•¿æœŸä»»åŠ¡

6. **é«˜çº§åŠŸèƒ½**
   - [ ] è‡ªé€‚åº”å‚æ•°è°ƒæ•´
   - [ ] å¸‚åœºç¯å¢ƒåˆ†ç±»
   - [ ] æœºå™¨å­¦ä¹ ä¿¡å·è¯„åˆ†
   - [ ] å¤šç­–ç•¥ä¿¡å·èåˆ

---

## å…«ã€é£é™©ä¸æ³¨æ„äº‹é¡¹

1. **è¿‡æ‹Ÿåˆé£é™©**: è¿‡æ»¤å™¨è¿‡å¤šå¯èƒ½å¯¼è‡´å†å²æ•°æ®è¿‡æ‹Ÿåˆ
   - è§£å†³ï¼šä½¿ç”¨walk-forwardåˆ†æï¼Œåˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†

2. **äº¤æ˜“é¢‘ç‡**: è¿‡åº¦è¿‡æ»¤å¯èƒ½å¯¼è‡´äº¤æ˜“æœºä¼šè¿‡å°‘
   - ç›‘æ§ï¼šæ¯ä¸ªè¿‡æ»¤å™¨çš„äº¤æ˜“æ¬¡æ•°å˜åŒ–
   - å»ºè®®ï¼šäº¤æ˜“æ¬¡æ•°ä¸ä½äºåŸºçº¿çš„30%

3. **å‚æ•°æ•æ„Ÿæ€§**: éœ€æµ‹è¯•å‚æ•°é²æ£’æ€§ï¼Œé¿å…è¿‡åº¦ä¼˜åŒ–å•ä¸€å‚æ•°
   - æ–¹æ³•ï¼šå‚æ•°æ‰«æï¼Œè§‚å¯ŸæŒ‡æ ‡ç¨³å®šæ€§

4. **è®¡ç®—å¼€é”€**: å¤šæŒ‡æ ‡è®¡ç®—éœ€æ³¨æ„æ€§èƒ½
   - ADXã€ATRç­‰æŒ‡æ ‡è®¡ç®—è¾ƒé‡
   - å»ºè®®ï¼šç¼“å­˜ä¸­é—´ç»“æœ

5. **åˆ†æ­¥éªŒè¯**: æ¯åŠ ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½è¦å•ç‹¬éªŒè¯ï¼Œé¿å…æ— æ•ˆç´¯åŠ 
   - **å¿…é¡»éµå¾ª**ï¼šå…ˆéªŒè¯å•ä¸ªè¿‡æ»¤å™¨æ•ˆæœ
   - å†æµ‹è¯•ç»„åˆæ•ˆæœ

---

## ä¹ã€å‚è€ƒèµ„æ–™

**å·²éªŒè¯çš„æµ‹è¯•ç»“æœ**
- åŸºçº¿æµ‹è¯•ï¼š`results/baseline_test/`
- å¢å¼ºç‰ˆï¼ˆæ— è¿‡æ»¤ï¼‰ï¼š`results/enhanced_no_filters/`

**ä»£ç æ–‡ä»¶**
- ç­–ç•¥ï¼š`strategies/sma_cross_enhanced.py`
- è¿‡æ»¤å™¨ï¼š`strategies/filters/`
- æµ‹è¯•è„šæœ¬ï¼š`test_filters.sh`, `quick_test_filters.py`

**éªŒæ”¶å‘½ä»¤**
```bash
# åŸºçº¿æµ‹è¯•ï¼ˆ3ä¸ªETFï¼‰
./run_backtest.sh --stock-list results/trend_etf_pool.csv \
  --strategy sma_cross --optimize \
  --data-dir data/chinese_etf/daily \
  --instrument-limit 3

# å¢å¼ºç‰ˆæµ‹è¯•ï¼ˆ3ä¸ªETFï¼‰
./run_backtest.sh --stock-list results/trend_etf_pool.csv \
  --strategy sma_cross_enhanced --optimize \
  --data-dir data/chinese_etf/daily \
  --instrument-limit 3
```
